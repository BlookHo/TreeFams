%div{ :id => 'error_output' }

%div{ :id => 'scale_slider' }

%div{ :id => 'tree_canvas' }

%script{ :type => 'text/javascript', :defer => 'defer' }
  :plain
    var error = document.getElementById('error_output');

    var kinetic = {
      container: 'tree_canvas',
      width: 1000,
      height: 1000,
      scale: 50,
      ajax: false
    };

    var constructTree = new reTree('#{@profiles_json}', kinetic);

    $('#scale_slider').slider({
      orientation: 'vertical',
      range: 'center',
      min: 0.5,
      max: 1.5,
      step: 0.01,
      value: 1,
      slide:
        function(event, ui) {
          constructTree.scale(ui.value);
        }
    });